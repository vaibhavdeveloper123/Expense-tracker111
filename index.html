<!DOCTYPE html>
<html lang="en">
<head>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4218914690424089" crossorigin="anonymous"></script>    
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Expense Tracker | Budget Calculator, EMI, Grocery & Finance Tools</title>

  <meta name="description" content="Track expenses, plan budget, calculate EMI, BMI, SIP, GST, discount, age, interest, and compress images with the all-in-one smart finance & tools app. Perfect for money management, students, and families. 100% free, easy-to-use calculators and converters.">
  <meta name="keywords" content="expense tracker, EMI calculator, budget planner, SIP calculator, GST calculator, age calculator, BMI calculator, loan calculator, interest calculator, discount calculator, online tools, image compressor, base64 encoder, QR code generator, text to speech online, percentage calculator, financial calculator, monthly budget planner, track spending, best budget app, free expense manager, save money app, daily spending tracker, utility bill calculator, personal finance tool, budget for students, income tracker, grocery calculator, household expense manager, best finance app India, digital budget journal, fast budget calculator, smart finance dashboard, financial tools app, budget sheet maker, daily budget app, monthly savings calculator, finance tools online, track money app, finance planner for home, manage budget and expenses, investment calculator, simple budget tool, convert km to miles, image compression tool, convert image to base64, generate QR code online, free online finance tools, best free budgeting app, online expense book, financial analysis app">
  <meta name="author" content="ExpenseWise Team">
  <meta name="robots" content="index, follow">

  <meta property="og:title" content="Smart Expense Tracker | Budget & EMI Calculator" />
  <meta property="og:description" content="Track your expenses, manage budgets, and calculate loans and interest with our all-in-one free expense tracker app." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://yourwebsite.com" />
  <meta property="og:image" content="https://yourwebsite.com/assets/preview.png" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Smart Expense Tracker & Calculator" />
  <meta name="twitter:description" content="Free tool to track income, expenses, and calculate budgets with interactive UI and analytics." />
  <meta name="twitter:image" content="https://yourwebsite.com/assets/preview.png" />

  <link rel="icon" href="/favicon.ico" type="image/x-icon" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-LSJ4HEZLM2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-LSJ4HEZLM2');
  </script>

  <style>
    :root {
      --primary: #2D3B8E;
      --secondary: #2CB9B0;
      --income: #4CAF50;
      --expense: #F44336;
      --light: #F5F7FA;
      --dark: #333;
      --gray: #888;
      --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: #f0f2f5;
      color: var(--dark);
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      margin-bottom: 20px;
    }

    .logo {
      font-size: 24px;
      font-weight: bold;
      color: var(--primary);
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .currency-selector {
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid #ddd;
      background-color: white;
      font-size: 14px;
      cursor: pointer;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }

    .balance-card {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: var(--card-shadow);
    }

    .balance-title {
      font-size: 16px;
      margin-bottom: 5px;
      opacity: 0.9;
    }

    .balance-amount {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 15px;
    }

    .balance-stats {
      display: flex;
      justify-content: space-between;
    }

    .income-stat, .expense-stat {
      text-align: center;
    }

    .income-stat i {
      color: var(--income);
    }

    .expense-stat i {
      color: var(--expense);
    }

    .stat-amount {
      font-weight: bold;
      font-size: 18px;
    }

    .stat-title {
      font-size: 14px;
      opacity: 0.8;
    }

    .quick-actions {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }

    .action-btn {
      background-color: white;
      border: none;
      border-radius: 10px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--card-shadow);
      transition: transform 0.2s;
    }

    .action-btn:hover {
      transform: translateY(-3px);
    }

    .action-btn i {
      font-size: 24px;
      margin-bottom: 8px;
      color: var(--primary);
    }

    .action-btn span {
      font-size: 14px;
      font-weight: 500;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .see-all {
      font-size: 14px;
      color: var(--primary);
      cursor: pointer;
    }

    .transactions-list {
      background-color: white;
      border-radius: 15px;
      padding: 15px;
      box-shadow: var(--card-shadow);
      margin-bottom: 20px;
    }

    .transaction-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #eee;
    }

    .transaction-item:last-child {
      border-bottom: none;
    }

    .transaction-left {
      display: flex;
      align-items: center;
    }

    .transaction-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: #E3F2FD;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      color: var(--primary);
    }

    .transaction-info h4 {
      font-size: 16px;
      margin-bottom: 3px;
    }

    .transaction-info p {
      font-size: 13px;
      color: var(--gray);
    }

    .transaction-amount {
      font-weight: 600;
    }

    .transaction-actions {
      display: flex;
      gap: 8px;
      margin-left: 10px;
    }

    .delete-btn {
      background: none;
      border: none;
      color: var(--expense);
      cursor: pointer;
      font-size: 14px;
    }

    .income {
      color: var(--income);
    }

    .expense {
      color: var(--expense);
    }

    .budget-card {
      background-color: white;
      border-radius: 15px;
      padding: 15px;
      box-shadow: var(--card-shadow);
      margin-bottom: 20px;
    }

    .budget-item {
      margin-bottom: 15px;
    }

    .budget-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
    }

    .budget-category {
      display: flex;
      align-items: center;
    }

    .budget-category i {
      margin-right: 10px;
      color: var(--primary);
    }

    .budget-amount {
      font-weight: 600;
    }

    .progress-bar {
      height: 8px;
      background-color: #eee;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      border-radius: 4px;
      background-color: var(--secondary);
    }

    .progress-danger {
      background-color: var(--expense);
    }

    .progress-warning {
      background-color: #FFC107;
    }

    .budget-footer {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: var(--gray);
      margin-top: 3px;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: white;
      border-radius: 15px;
      width: 90%;
      max-width: 400px;
      padding: 20px;
      animation: modalFadeIn 0.3s;
    }

    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 600;
    }

    .close-modal {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--gray);
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }

    .form-control {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
    }

    .type-toggle {
      display: flex;
      border: 1px solid #ddd;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 15px;
    }

    .type-toggle button {
      flex: 1;
      padding: 12px;
      border: none;
      background: none;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s;
    }

    .type-toggle button.active {
      background-color: var(--primary);
      color: white;
    }

    .btn {
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      width: 100%;
      font-size: 16px;
      transition: background-color 0.3s;
    }

    .btn-primary {
      background-color: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background-color: #1E2B7B;
    }

    .tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
    }

    .tab {
      padding: 10px 20px;
      cursor: pointer;
      position: relative;
    }

    .tab.active {
      color: var(--primary);
      font-weight: 500;
    }

    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      width: 100%;
      height: 3px;
      background-color: var(--primary);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .chart-container {
      height: 200px;
      margin-bottom: 20px;
    }

    .confirmation-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1001;
      justify-content: center;
      align-items: center;
    }

    .confirmation-content {
      background-color: white;
      border-radius: 15px;
      width: 90%;
      max-width: 400px;
      padding: 20px;
      text-align: center;
    }

    .confirmation-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }

    .confirmation-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
    }

    .confirm-btn {
      background-color: var(--expense);
      color: white;
    }

    .cancel-btn {
      background-color: #eee;
      color: var(--dark);
    }

    .grocery-list {
      background-color: white;
      border-radius: 15px;
      padding: 15px;
      box-shadow: var(--card-shadow);
      margin-bottom: 20px;
    }

    .grocery-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }

    .grocery-item:last-child {
      border-bottom: none;
    }

    .grocery-item input[type="checkbox"] {
      margin-right: 10px;
    }

    .grocery-item .item-name {
      flex-grow: 1;
    }

    .grocery-item .item-quantity {
      margin-right: 15px;
      color: var(--gray);
    }

    .calculator-container {
      background-color: white;
      border-radius: 15px;
      padding: 15px;
      box-shadow: var(--card-shadow);
      margin-bottom: 20px;
    }

    .calculator-tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 15px;
    }

    .calculator-tab {
      padding: 8px 15px;
      cursor: pointer;
      position: relative;
    }

    .calculator-tab.active {
      color: var(--primary);
      font-weight: 500;
    }

    .calculator-tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      width: 100%;
      height: 3px;
      background-color: var(--primary);
    }

    .calculator-content {
      display: none;
    }

    .calculator-content.active {
      display: block;
    }

    .calculator-result {
      margin-top: 15px;
      padding: 10px;
      background-color: #f5f7fa;
      border-radius: 8px;
      font-weight: 600;
    }

    /* New Tools Section Styles */
    .tools-container {
      background-color: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: var(--card-shadow);
      margin-bottom: 20px;
    }

    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .tool-card {
      background-color: var(--light);
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      border: 1px solid #eee;
    }

    .tool-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }

    .tool-card i {
      font-size: 28px;
      margin-bottom: 10px;
      color: var(--primary);
    }

    .tool-card h3 {
      font-size: 16px;
      margin-bottom: 5px;
    }

    .tool-card p {
      font-size: 12px;
      color: var(--gray);
    }

    .tool-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .tool-modal-content {
      background-color: white;
      border-radius: 15px;
      width: 90%;
      max-width: 500px;
      padding: 25px;
      max-height: 80vh;
      overflow-y: auto;
    }

    .tool-result {
      background-color: #f5f7fa;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      font-size: 16px;
    }

    /* New Calculator Grid Styles */
    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .calculator-box {
      background-color: var(--light);
      border-radius: 10px;
      padding: 15px;
      box-shadow: var(--card-shadow);
    }

    .calculator-box h3 {
      margin-bottom: 15px;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    @media (max-width: 768px) {
      .quick-actions {
        grid-template-columns: repeat(3, 1fr);
      }
      .tools-grid {
        grid-template-columns: repeat(3, 1fr);
      }
      .calculator-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .quick-actions {
        grid-template-columns: repeat(2, 1fr);
      }
      .tools-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .balance-stats {
        flex-direction: column;
        gap: 15px;
      }
      .stat-amount {
        font-size: 16px;
      }
      .header-controls {
        gap: 10px;
      }
      .currency-selector {
        padding: 6px 8px;
        font-size: 12px;
      }
    }
  </style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo">üí∞ ExpenseTracker</div>
    <div class="header-controls">
      <select class="currency-selector" id="currency-selector">
        <option value="USD">USD ($)</option>
        <option value="EUR">EUR (‚Ç¨)</option>
        <option value="GBP">GBP (¬£)</option>
        <option value="JPY">JPY (¬•)</option>
        <option value="CAD">CAD ($)</option>
        <option value="AUD">AUD ($)</option>
        <option value="INR">INR (‚Çπ)</option>
        <option value="CNY">CNY (¬•)</option>
      </select>
      <div class="user-avatar">üë§</div>
    </div>
  </header>

  <div class="balance-card">
    <div class="balance-title">Total Balance</div>
    <div class="balance-amount" id="total-balance">$0.00</div>
    <div class="balance-stats">
      <div class="income-stat">
        <i class="fas fa-arrow-up"></i>
        <div class="stat-amount" id="total-income">$0.00</div>
        <div class="stat-title">Income üí∞</div>
      </div>
      <div class="expense-stat">
        <i class="fas fa-arrow-down"></i>
        <div class="stat-amount" id="total-expense">$0.00</div>
        <div class="stat-title">Expenses üí∏</div>
      </div>
    </div>
  </div>

  <div class="quick-actions">
    <div class="action-btn" id="add-expense">
      <i class="fas fa-minus-circle"></i>
      <span>Add Expense ‚ûñ</span>
    </div>
    <div class="action-btn" id="add-income">
      <i class="fas fa-plus-circle"></i>
      <span>Add Income ‚ûï</span>
    </div>
    <div class="action-btn" id="set-budget">
      <i class="fas fa-wallet"></i>
      <span>Set Budget üí∞</span>
    </div>
    <div class="action-btn" id="view-calculators">
      <i class="fas fa-calculator"></i>
      <span>Calculators üßÆ</span>
    </div>
    <div class="action-btn" id="view-grocery">
      <i class="fas fa-shopping-basket"></i>
      <span>Grocery List üõí</span>
    </div>
    <div class="action-btn" id="view-tools">
      <i class="fas fa-tools"></i>
      <span>More Tools üõ†Ô∏è</span>
    </div>
  </div>

  <div class="tabs">
    <div class="tab active" data-tab="transactions">üí≥ Transactions</div>
    <div class="tab" data-tab="budgets">üìä Budgets</div>
    <div class="tab" data-tab="analytics">üìà Analytics</div>
    <div class="tab" data-tab="calculators" style="display: none;">üßÆ Calculators</div>
    <div class="tab" data-tab="grocery" style="display: none;">üõí Grocery List</div>
    <div class="tab" data-tab="tools" style="display: none;">üõ†Ô∏è Utility Tools</div>
  </div>

  <div class="tab-content active" id="transactions">
    <div class="section-title">
      Recent Transactions
      <span class="see-all">See All üëâ</span>
    </div>
    <div class="transactions-list" id="transactions-container">
      <div class="no-transactions">üì≠ No transactions yet. Add your first transaction!</div>
    </div>
  </div>

  <div class="tab-content" id="budgets">
    <div class="section-title">
      Monthly Budgets
      <span class="see-all">See All üëâ</span>
    </div>
    <div class="budget-card" id="budgets-container">
      <div class="no-budgets">üì≠ No budgets set up yet. Create your first budget!</div>
    </div>
  </div>

  <div class="tab-content" id="analytics">
    <div class="section-title">
      Spending Analytics
    </div>
    <div class="chart-container">
      <canvas id="spendingChart"></canvas>
    </div>
    <div class="section-title">
      Category Breakdown
    </div>
    <div class="chart-container">
      <canvas id="categoryChart"></canvas>
    </div>
  </div>

  <div class="tab-content" id="calculators">
    <div class="section-title">
      Financial Calculators üßÆ
    </div>
    <div class="calculator-container">
      <div class="calculator-tabs">
        <div class="calculator-tab active" data-calculator="emi">üè¶ EMI</div>
        <div class="calculator-tab" data-calculator="percentage">% Percentage</div>
        <div class="calculator-tab" data-calculator="interest">üíµ Interest</div>
      </div>
      <div class="calculator-content active" id="emi-calculator">
        <div class="form-group">
          <label for="loan-amount">üí∞ Loan Amount</label>
          <input class="form-control" id="loan-amount" placeholder="e.g. 100000" type="number"/>
        </div>
        <div class="form-group">
          <label for="interest-rate">üìà Interest Rate (% p.a.)</label>
          <input class="form-control" id="interest-rate" placeholder="e.g. 8.5" type="number"/>
        </div>
        <div class="form-group">
          <label for="loan-tenure">‚è≥ Loan Tenure (months)</label>
          <input class="form-control" id="loan-tenure" placeholder="e.g. 60" type="number"/>
        </div>
        <button class="btn btn-primary" id="calculate-emi">üßÆ Calculate EMI</button>
        <div class="calculator-result" id="emi-result"></div>
      </div>
      <div class="calculator-content" id="percentage-calculator">
        <div class="form-group">
          <label for="percentage-value">üî¢ Value</label>
          <input class="form-control" id="percentage-value" placeholder="e.g. 100" type="number"/>
        </div>
        <div class="form-group">
          <label for="percentage">% Percentage</label>
          <input class="form-control" id="percentage" placeholder="e.g. 15" type="number"/>
        </div>
        <button class="btn btn-primary" id="calculate-percentage">üßÆ Calculate</button>
        <div class="calculator-result" id="percentage-result"></div>
      </div>
      <div class="calculator-content" id="interest-calculator">
        <div class="form-group">
          <label for="principal-amount">üí∞ Principal Amount</label>
          <input class="form-control" id="principal-amount" placeholder="e.g. 10000" type="number"/>
        </div>
        <div class="form-group">
          <label for="interest-rate-simple">üìà Interest Rate (% p.a.)</label>
          <input class="form-control" id="interest-rate-simple" placeholder="e.g. 5" type="number"/>
        </div>
        <div class="form-group">
          <label for="time-period">‚è≥ Time Period (years)</label>
          <input class="form-control" id="time-period" placeholder="e.g. 3" type="number"/>
        </div>
        <button class="btn btn-primary" id="calculate-interest">üßÆ Calculate Interest</button>
        <div class="calculator-result" id="interest-result"></div>
      </div>
    </div>
  </div>

  <div class="tab-content" id="grocery">
    <div class="section-title">
      üõí Grocery List
      <button class="btn btn-primary" id="add-grocery-item" style="width: auto; padding: 8px 15px;">
        <i class="fas fa-plus"></i> Add Item
      </button>
    </div>
    <div class="grocery-list" id="grocery-container">
      <div class="no-items">üõçÔ∏è Your grocery list is empty. Add some items!</div>
    </div>
  </div>

  <div class="tab-content" id="tools">
    <div class="section-title">
      üõ†Ô∏è Utility Tools
    </div>
    <div class="tools-container">
      <div class="tools-grid">
        <div class="tool-card" data-tool="bmi">
          <i class="fas fa-weight"></i>
          <h3>BMI Calculator</h3>
          <p>Calculate your Body Mass Index</p>
        </div>
        <div class="tool-card" data-tool="age">
          <i class="fas fa-birthday-cake"></i>
          <h3>Age Calculator</h3>
          <p>Calculate exact age from DOB</p>
        </div>
        <div class="tool-card" data-tool="discount">
          <i class="fas fa-tag"></i>
          <h3>Discount Calc</h3>
          <p>Calculate final price after discount</p>
        </div>
        <div class="tool-card" data-tool="gst">
          <i class="fas fa-receipt"></i>
          <h3>GST Calculator</h3>
          <p>Calculate GST amount & total</p>
        </div>
        <div class="tool-card" data-tool="sip">
          <i class="fas fa-chart-line"></i>
          <h3>SIP Calculator</h3>
          <p>Calculate SIP returns</p>
        </div>
        <div class="tool-card" data-tool="qrcode">
          <i class="fas fa-qrcode"></i>
          <h3>QR Generator</h3>
          <p>Generate QR codes</p>
        </div>
        <div class="tool-card" data-tool="tts">
          <i class="fas fa-volume-up"></i>
          <h3>Text to Speech</h3>
          <p>Convert text to audio</p>
        </div>
        <div class="tool-card" data-tool="unit">
          <i class="fas fa-exchange-alt"></i>
          <h3>Unit Converter</h3>
          <p>Convert km to miles</p>
        </div>
        <div class="tool-card" data-tool="base64">
          <i class="fas fa-image"></i>
          <h3>Base64 Encoder</h3>
          <p>Convert image to Base64</p>
        </div>
        <div class="tool-card" data-tool="image-compressor">
          <i class="fas fa-file-image"></i>
          <h3>Image Compressor</h3>
          <p>Reduce image file size</p>
        </div>
        <div class="tool-card" data-tool="password-generator">
          <i class="fas fa-key"></i>
          <h3>Password Generator</h3>
          <p>Create strong passwords</p>
        </div>
        <div class="tool-card" data-tool="currency-converter">
          <i class="fas fa-money-bill-wave"></i>
          <h3>Currency Converter</h3>
          <p>Convert between currencies</p>
        </div>
        <div class="tool-card" data-tool="electricity">
          <i class="fas fa-bolt"></i>
          <h3>Electricity Bill</h3>
          <p>Calculate electricity costs</p>
        </div>
        <div class="tool-card" data-tool="water">
          <i class="fas fa-tint"></i>
          <h3>Water Intake</h3>
          <p>Calculate daily water needs</p>
        </div>
        <div class="tool-card" data-tool="sleep">
          <i class="fas fa-moon"></i>
          <h3>Sleep Calculator</h3>
          <p>Find optimal bedtimes</p>
        </div>
        <div class="tool-card" data-tool="tip">
          <i class="fas fa-utensils"></i>
          <h3>Tip Calculator</h3>
          <p>Calculate tips easily</p>
        </div>
        <div class="tool-card" data-tool="pdf-tools">
            <i class="fas fa-file-pdf"></i>
            <h3>PDF Tools</h3>
            <p>Merge, split, compress, convert PDFs</p>
        </div>
        <div class="tool-card" data-tool="video-converter">
            <i class="fas fa-video"></i>
            <h3>Video to MP3</h3>
            <p>Convert video to audio or compress</p>
        </div>
        <div class="tool-card" data-tool="image-to-text">
            <i class="fas fa-font"></i>
            <h3>Image to Text (OCR)</h3>
            <p>Extract text from images</p>
        </div>
        <div class="tool-card" data-tool="file-converter">
            <i class="fas fa-exchange-alt"></i>
            <h3>File Converter</h3>
            <p>Convert between various file types</p>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="transaction-modal">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-title">üí∏ Add Transaction</div>
      <button class="close-modal">√ó</button>
    </div>
    <form id="transaction-form">
      <div class="type-toggle">
        <button class="active" data-type="expense" type="button">Expense ‚ûñ</button>
        <button data-type="income" type="button">Income ‚ûï</button>
      </div>
      <div class="form-group">
        <label for="amount">üí∞ Amount</label>
        <input class="form-control" id="amount" placeholder="0.00" required="" step="0.01" type="number"/>
      </div>
      <div class="form-group">
        <label for="category">üè∑Ô∏è Category</label>
        <select class="form-control" id="category" required="">
          <option value="">Select Category</option>
          <option value="food">üçî Food</option>
          <option value="transport">üöó Transport</option>
          <option value="shopping">üõçÔ∏è Shopping</option>
          <option value="housing">üè† Housing</option>
          <option value="entertainment">üé¨ Entertainment</option>
          <option value="salary">üíº Salary</option>
          <option value="other">‚ú® Other</option>
        </select>
      </div>
      <div class="form-group">
        <label for="date">üìÖ Date</label>
        <input class="form-control" id="date" required="" type="date"/>
      </div>
      <div class="form-group">
        <label for="description">üìù Description (Optional)</label>
        <input class="form-control" id="description" placeholder="Add a note" type="text"/>
      </div>
      <button class="btn btn-primary" type="submit">üíæ Save Transaction</button>
    </form>
  </div>
</div>

<div class="modal" id="budget-modal">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-title">üí∞ Set Budget</div>
      <button class="close-modal">√ó</button>
    </div>
    <form id="budget-form">
      <div class="form-group">
        <label for="budget-category">üè∑Ô∏è Category</label>
        <select class="form-control" id="budget-category" required="">
          <option value="">Select Category</option>
          <option value="food">üçî Food</option>
          <option value="transport">üöó Transport</option>
          <option value="shopping">üõçÔ∏è Shopping</option>
          <option value="housing">üè† Housing</option>
          <option value="entertainment">üé¨ Entertainment</option>
        </select>
      </div>
      <div class="form-group">
        <label for="budget-amount">üí∞ Budget Amount</label>
        <input class="form-control" id="budget-amount" placeholder="0.00" required="" step="0.01" type="number"/>
      </div>
      <button class="btn btn-primary" type="submit">üíæ Save Budget</button>
    </form>
  </div>
</div>

<div class="modal" id="grocery-modal">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-title">üõí Add Grocery Item</div>
      <button class="close-modal">√ó</button>
    </div>
    <form id="grocery-form">
      <div class="form-group">
        <label for="grocery-name">üìù Item Name</label>
        <input class="form-control" id="grocery-name" placeholder="e.g. Milk" required="" type="text"/>
      </div>
      <div class="form-group">
        <label for="grocery-quantity">üî¢ Quantity</label>
        <input class="form-control" id="grocery-quantity" placeholder="e.g. 1 liter" type="text"/>
      </div>
      <button class="btn btn-primary" type="submit">üíæ Add Item</button>
    </form>
  </div>
</div>

<div class="confirmation-modal" id="confirmation-modal">
  <div class="confirmation-content">
    <h3>üóëÔ∏è Delete Transaction</h3>
    <p>Are you sure you want to delete this transaction?</p>
    <div class="confirmation-buttons">
      <button class="confirmation-btn cancel-btn" id="cancel-delete">‚ùå Cancel</button>
      <button class="confirmation-btn confirm-btn" id="confirm-delete">‚úÖ Delete</button>
    </div>
  </div>
</div>

<div class="tool-modal" id="tool-modal">
  <div class="tool-modal-content">
    <div class="modal-header">
      <div class="modal-title" id="tool-modal-title">Tool</div>
      <button class="close-modal" id="close-tool-modal">√ó</button>
    </div>
    <div id="tool-modal-content">
      <div id="bmi-tool" style="display: none;">
        <h3>BMI Calculator</h3>
        <div class="form-group">
          <label for="bmi-weight">Weight (kg)</label>
          <input type="number" id="bmi-weight" class="form-control" placeholder="e.g. 70">
        </div>
        <div class="form-group">
          <label for="bmi-height">Height (cm)</label>
          <input type="number" id="bmi-height" class="form-control" placeholder="e.g. 175">
        </div>
        <button class="btn btn-primary" id="calculate-bmi">Calculate BMI</button>
        <div class="tool-result" id="bmi-result"></div>
      </div>

      <div id="age-tool" style="display: none;">
        <h3>Age Calculator</h3>
        <div class="form-group">
          <label for="dob">Date of Birth</label>
          <input type="date" id="dob" class="form-control">
        </div>
        <button class="btn btn-primary" id="calculate-age">Calculate Age</button>
        <div class="tool-result" id="age-result"></div>
      </div>

      <div id="discount-tool" style="display: none;">
        <h3>Discount Calculator</h3>
        <div class="form-group">
          <label for="original-price">Original Price</label>
          <input type="number" id="original-price" class="form-control" placeholder="e.g. 100">
        </div>
        <div class="form-group">
          <label for="discount-percentage">Discount (%)</label>
          <input type="number" id="discount-percentage" class="form-control" placeholder="e.g. 15">
        </div>
        <button class="btn btn-primary" id="calculate-discount">Calculate Discount</button>
        <div class="tool-result" id="discount-result"></div>
      </div>

      <div id="gst-tool" style="display: none;">
        <h3>GST Calculator</h3>
        <div class="form-group">
          <label for="gst-amount">Amount</label>
          <input type="number" id="gst-amount" class="form-control" placeholder="e.g. 1000">
        </div>
        <div class="form-group">
          <label for="gst-rate">GST Rate (%)</label>
          <input type="number" id="gst-rate" class="form-control" placeholder="e.g. 18">
        </div>
        <button class="btn btn-primary" id="calculate-gst">Calculate GST</button>
        <div class="tool-result" id="gst-result"></div>
      </div>

      <div id="sip-tool" style="display: none;">
        <h3>SIP Calculator</h3>
        <div class="form-group">
          <label for="sip-monthly-investment">Monthly Investment</label>
          <input type="number" id="sip-monthly-investment" class="form-control" placeholder="e.g. 5000">
        </div>
        <div class="form-group">
          <label for="sip-expected-return">Expected Return Rate (% p.a.)</label>
          <input type="number" id="sip-expected-return" class="form-control" placeholder="e.g. 12">
        </div>
        <div class="form-group">
          <label for="sip-time-period">Time Period (years)</label>
          <input type="number" id="sip-time-period" class="form-control" placeholder="e.g. 10">
        </div>
        <button class="btn btn-primary" id="calculate-sip">Calculate SIP</button>
        <div class="tool-result" id="sip-result"></div>
      </div>

      <div id="qrcode-tool" style="display: none;">
        <h3>QR Code Generator</h3>
        <div class="form-group">
          <label for="qr-text">Text to Encode</label>
          <input type="text" id="qr-text" class="form-control" placeholder="e.g. Hello World">
        </div>
        <button class="btn btn-primary" id="generate-qr">Generate QR Code</button>
        <div class="tool-result" id="qr-result">
          <canvas id="qrcode-canvas"></canvas>
        </div>
      </div>

      <div id="tts-tool" style="display: none;">
        <h3>Text to Speech</h3>
        <div class="form-group">
          <label for="tts-text">Text to Convert</label>
          <textarea id="tts-text" class="form-control" rows="4" placeholder="Enter text here..."></textarea>
        </div>
        <button class="btn btn-primary" id="play-tts">Play Speech</button>
      </div>

      <div id="unit-tool" style="display: none;">
        <h3>Unit Converter (KM to Miles)</h3>
        <div class="form-group">
          <label for="km-input">Kilometers</label>
          <input type="number" id="km-input" class="form-control" placeholder="e.g. 100">
        </div>
        <button class="btn btn-primary" id="convert-unit">Convert</button>
        <div class="tool-result" id="unit-result"></div>
      </div>

      <div id="base64-tool" style="display: none;">
        <h3>Base64 Encoder (Image)</h3>
        <div class="form-group">
          <label for="base64-image-input">Upload Image</label>
          <input type="file" id="base64-image-input" class="form-control" accept="image/*">
        </div>
        <button class="btn btn-primary" id="encode-base64">Encode to Base64</button>
        <div class="tool-result" id="base64-result">
          <textarea id="base64-output" class="form-control" rows="5" readonly></textarea>
          <button class="btn btn-primary" id="copy-base64-btn" style="margin-top: 10px;">Copy to Clipboard</button>
        </div>
      </div>

      <div id="image-compressor-tool" style="display: none;">
        <h3>Image Compressor / Resizer</h3>
        <div class="form-group">
          <label for="image-upload-compress">Upload Image</label>
          <input type="file" id="image-upload-compress" class="form-control" accept="image/*">
        </div>
        <div class="form-group">
          <label for="compression-quality">Quality (0-1, 1 is best)</label>
          <input type="number" id="compression-quality" class="form-control" min="0.1" max="1" step="0.1" value="0.8">
        </div>
        <div class="form-group">
          <label for="resize-width">Resize Width (Optional)</label>
          <input type="number" id="resize-width" class="form-control" placeholder="e.g. 800">
        </div>
        <button class="btn btn-primary" id="compress-image">Compress/Resize Image</button>
        <div class="tool-result" id="compressed-image-result">
          <a id="download-compressed-image" download="compressed_image.png" style="display: none;">Download Compressed Image</a>
          <img id="preview-compressed-image" style="max-width: 100%; margin-top: 10px; display: none;">
        </div>
      </div>

      <div id="password-generator-tool" style="display: none;">
        <h3>Password Generator</h3>
        <div class="form-group">
          <label for="password-length">Length</label>
          <input type="number" id="password-length" class="form-control" min="8" max="64" value="12">
        </div>
        <div class="form-group">
          <input type="checkbox" id="include-uppercase" checked>
          <label for="include-uppercase">Include Uppercase</label>
        </div>
        <div class="form-group">
          <input type="checkbox" id="include-lowercase" checked>
          <label for="include-lowercase">Include Lowercase</label>
        </div>
        <div class="form-group">
          <input type="checkbox" id="include-numbers" checked>
          <label for="include-numbers">Include Numbers</label>
        </div>
        <div class="form-group">
          <input type="checkbox" id="include-symbols">
          <label for="include-symbols">Include Symbols</label>
        </div>
        <button class="btn btn-primary" id="generate-password">Generate Password</button>
        <div class="tool-result" id="password-result">
          <input type="text" id="generated-password" class="form-control" readonly>
          <button class="btn btn-primary" id="copy-password-btn" style="margin-top: 10px;">Copy to Clipboard</button>
        </div>
      </div>

      <div id="currency-converter-tool" style="display: none;">
        <h3>Currency Converter</h3>
        <div class="form-group">
          <label for="convert-amount">Amount</label>
          <input type="number" id="convert-amount" class="form-control" placeholder="e.g. 100">
        </div>
        <div class="form-group">
          <label for="convert-from">From Currency</label>
          <select id="convert-from" class="form-control">
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
            <option value="GBP">GBP</option>
            <option value="JPY">JPY</option>
            <option value="INR">INR</option>
          </select>
        </div>
        <div class="form-group">
          <label for="convert-to">To Currency</label>
          <select id="convert-to" class="form-control">
            <option value="EUR">EUR</option>
            <option value="USD">USD</option>
            <option value="GBP">GBP</option>
            <option value="JPY">JPY</option>
            <option value="INR">INR</option>
          </select>
        </div>
        <button class="btn btn-primary" id="convert-currency">Convert</button>
        <div class="tool-result" id="currency-result"></div>
      </div>

      <div id="electricity-tool" style="display: none;">
        <h3>Electricity Bill Calculator</h3>
        <div class="form-group">
          <label for="units-consumed">Units Consumed</label>
          <input type="number" id="units-consumed" class="form-control" placeholder="e.g. 200">
        </div>
        <div class="form-group">
          <label for="cost-per-unit">Cost per Unit</label>
          <input type="number" id="cost-per-unit" class="form-control" placeholder="e.g. 7.5">
        </div>
        <button class="btn btn-primary" id="calculate-electricity">Calculate Bill</button>
        <div class="tool-result" id="electricity-result"></div>
      </div>

      <div id="water-tool" style="display: none;">
        <h3>Water Intake Calculator</h3>
        <div class="form-group">
          <label for="water-weight">Your Weight (kg)</label>
          <input type="number" id="water-weight" class="form-control" placeholder="e.g. 70">
        </div>
        <button class="btn btn-primary" id="calculate-water">Calculate Intake</button>
        <div class="tool-result" id="water-result"></div>
      </div>

      <div id="sleep-tool" style="display: none;">
        <h3>Sleep Cycle Calculator</h3>
        <div class="form-group">
          <label for="bedtime-input">When do you plan to sleep?</label>
          <input type="time" id="bedtime-input" class="form-control">
        </div>
        <button class="btn btn-primary" id="calculate-sleep">Calculate Wake Up Time</button>
        <div class="tool-result" id="sleep-result"></div>
      </div>

      <div id="tip-tool" style="display: none;">
        <h3>Tip Calculator</h3>
        <div class="form-group">
          <label for="bill-amount">Bill Amount</label>
          <input type="number" id="bill-amount" class="form-control" placeholder="e.g. 50">
        </div>
        <div class="form-group">
          <label for="tip-percentage">Tip Percentage (%)</label>
          <input type="number" id="tip-percentage" class="form-control" placeholder="e.g. 15">
        </div>
        <button class="btn btn-primary" id="calculate-tip">Calculate Tip</button>
        <div class="tool-result" id="tip-result"></div>
      </div>

      <div id="pdf-tools-tool" style="display: none;">
          <h3>PDF Tools</h3>
          <p>This section will contain options for merging, splitting, compressing, and converting PDF files.</p>
          <div class="form-group">
            <label for="pdf-upload">Upload PDF(s)</label>
            <input type="file" id="pdf-upload" class="form-control" accept=".pdf" multiple>
          </div>
          <div class="form-group">
            <label for="pdf-action">Select Action:</label>
            <select id="pdf-action" class="form-control">
              <option value="merge">Merge PDFs</option>
              <option value="split">Split PDF</option>
              <option value="compress">Compress PDF</option>
              <option value="convert-word">Convert to Word</option>
              <option value="convert-excel">Convert to Excel</option>
              <option value="convert-jpg">Convert to JPG</option>
            </select>
          </div>
          <button class="btn btn-primary" id="perform-pdf-action">Perform Action</button>
          <div class="tool-result" id="pdf-tools-result"></div>
      </div>

      <div id="video-converter-tool" style="display: none;">
          <h3>Video to MP3 Converter / Compressor</h3>
          <p>Upload a video to convert it to MP3 or compress its size.</p>
          <div class="form-group">
            <label for="video-upload">Upload Video</label>
            <input type="file" id="video-upload" class="form-control" accept="video/*">
          </div>
          <div class="form-group">
            <label for="video-action">Select Action:</label>
            <select id="video-action" class="form-control">
              <option value="to-mp3">Convert to MP3</option>
              <option value="compress-video">Compress Video</option>
            </select>
          </div>
          <button class="btn btn-primary" id="perform-video-action">Perform Action</button>
          <div class="tool-result" id="video-converter-result"></div>
      </div>

      <div id="image-to-text-tool" style="display: none;">
          <h3>Image to Text (OCR)</h3>
          <p>Upload an image to extract text from it.</p>
          <div class="form-group">
            <label for="ocr-image-upload">Upload Image</label>
            <input type="file" id="ocr-image-upload" class="form-control" accept="image/*">
          </div>
          <button class="btn btn-primary" id="perform-ocr">Extract Text</button>
          <div class="tool-result" id="image-to-text-result">
            <textarea id="ocr-output" class="form-control" rows="5" readonly placeholder="Extracted text will appear here..."></textarea>
            <button class="btn btn-primary" id="copy-ocr-text-btn" style="margin-top: 10px;">Copy to Clipboard</button>
          </div>
      </div>

      <div id="file-converter-tool" style="display: none;">
          <h3>All-in-One File Converter</h3>
          <p>Convert various document, image, and video files.</p>
          <div class="form-group">
            <label for="file-upload-converter">Upload File</label>
            <input type="file" id="file-upload-converter" class="form-control">
          </div>
          <div class="form-group">
            <label for="convert-to-format">Convert To:</label>
            <select id="convert-to-format" class="form-control">
              <option value="">Select Format</option>
              <option value="pdf">PDF</option>
              <option value="doc">DOC</option>
              <option value="png">PNG</option>
              <option value="jpg">JPG</option>
              <option value="mp4">MP4</option>
              <option value="mp3">MP3</option>
            </select>
          </div>
          <button class="btn btn-primary" id="perform-file-conversion">Convert File</button>
          <div class="tool-result" id="file-converter-result"></div>
      </div>

    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
  // Data structure
  let transactions = [];
  let budgets = [];
  let groceryList = [];
  let currentCurrency = 'USD'; // Default currency

  // Currency symbols and formatting
  const currencySymbols = {
    USD: '$',
    EUR: '‚Ç¨',
    GBP: '¬£',
    JPY: '¬•',
    CAD: '$',
    AUD: '$',
    INR: '‚Çπ',
    CNY: '¬•'
  };

  // DOM Elements
  const transactionsContainer = document.getElementById('transactions-container');
  const budgetsContainer = document.getElementById('budgets-container');
  const groceryContainer = document.getElementById('grocery-container');
  const transactionModal = document.getElementById('transaction-modal');
  const budgetModal = document.getElementById('budget-modal');
  const groceryModal = document.getElementById('grocery-modal');
  const transactionForm = document.getElementById('transaction-form');
  const budgetForm = document.getElementById('budget-form');
  const groceryForm = document.getElementById('grocery-form');
  const typeToggleButtons = document.querySelectorAll('.type-toggle button');
  const tabs = document.querySelectorAll('.tab');
  const tabContents = document.querySelectorAll('.tab-content');
  const calculatorTabs = document.querySelectorAll('.calculator-tab');
  const calculatorContents = document.querySelectorAll('.calculator-content');
  const addExpenseBtn = document.getElementById('add-expense');
  const addIncomeBtn = document.getElementById('add-income');
  const setBudgetBtn = document.getElementById('set-budget');
  const viewCalculatorsBtn = document.getElementById('view-calculators');
  const viewGroceryBtn = document.getElementById('view-grocery');
  const viewToolsBtn = document.getElementById('view-tools');
  const addGroceryBtn = document.getElementById('add-grocery-item');
  const seeAllButtons = document.querySelectorAll('.see-all');
  const totalBalanceEl = document.getElementById('total-balance');
  const totalIncomeEl = document.getElementById('total-income');
  const totalExpenseEl = document.getElementById('total-expense');
  const confirmationModal = document.getElementById('confirmation-modal');
  const cancelDeleteBtn = document.getElementById('cancel-delete');
  const confirmDeleteBtn = document.getElementById('confirm-delete');
  const calculateEmiBtn = document.getElementById('calculate-emi');
  const calculatePercentageBtn = document.getElementById('calculate-percentage');
  const calculateInterestBtn = document.getElementById('calculate-interest');
  const currencySelector = document.getElementById('currency-selector');
  const toolModal = document.getElementById('tool-modal');
  const toolModalTitle = document.getElementById('tool-modal-title');
  const toolModalContent = document.getElementById('tool-modal-content');
  const closeToolModal = document.getElementById('close-tool-modal');
  const toolCards = document.querySelectorAll('.tool-card');
  let spendingChart, categoryChart;
  let transactionToDelete = null;

  // Helper functions for localStorage
  function saveDataToLocalStorage() {
    localStorage.setItem('expenseTracker_transactions', JSON.stringify(transactions));
    localStorage.setItem('expenseTracker_budgets', JSON.stringify(budgets));
    localStorage.setItem('expenseTracker_grocery', JSON.stringify(groceryList));
    localStorage.setItem('expenseTracker_currency', currentCurrency);
  }

  function loadDataFromLocalStorage() {
    const savedTransactions = localStorage.getItem('expenseTracker_transactions');
    const savedBudgets = localStorage.getItem('expenseTracker_budgets');
    const savedGrocery = localStorage.getItem('expenseTracker_grocery');
    const savedCurrency = localStorage.getItem('expenseTracker_currency');
    if (savedTransactions) {
      transactions = JSON.parse(savedTransactions);
    }
    if (savedBudgets) {
      budgets = JSON.parse(savedBudgets);
    }
    if (savedGrocery) {
      groceryList = JSON.parse(savedGrocery);
    }
    if (savedCurrency) {
      currentCurrency = savedCurrency;
      currencySelector.value = currentCurrency;
    }
  }

  // Format currency based on current selection
  function formatCurrency(amount) {
    const symbol = currencySymbols[currentCurrency] || '$';
    return `${symbol}${amount.toFixed(2)}`;
  }

  // Initialize the app
  document.addEventListener('DOMContentLoaded', function() {
    loadDataFromLocalStorage();
    updateBalance();
    renderTransactions();
    renderBudgets();
    renderGroceryList();
    initCharts();
    // Set today's date as default in the form
    document.getElementById('date').valueAsDate = new Date();
  });

  // Event Listeners
  addExpenseBtn.addEventListener('click', () => openTransactionModal('expense'));
  addIncomeBtn.addEventListener('click', () => openTransactionModal('income'));
  setBudgetBtn.addEventListener('click', () => openBudgetModal());
  viewCalculatorsBtn.addEventListener('click', () => showTab('calculators'));
  viewGroceryBtn.addEventListener('click', () => showTab('grocery'));
  viewToolsBtn.addEventListener('click', () => showTab('tools'));
  addGroceryBtn.addEventListener('click', () => openGroceryModal());
  currencySelector.addEventListener('change', function() {
    currentCurrency = this.value;
    saveDataToLocalStorage();
    updateBalance();
    renderTransactions();
    renderBudgets();
  });

  typeToggleButtons.forEach(button => {
    button.addEventListener('click', function() {
      typeToggleButtons.forEach(btn => btn.classList.remove('active'));
      this.classList.add('active');
    });
  });

  tabs.forEach(tab => {
    tab.addEventListener('click', function() {
      const tabId = this.getAttribute('data-tab');
      showTab(tabId);
    });
  });

  calculatorTabs.forEach(tab => {
    tab.addEventListener('click', function() {
      const calculatorId = this.getAttribute('data-calculator');
      calculatorTabs.forEach(t => t.classList.remove('active'));
      calculatorContents.forEach(c => c.classList.remove('active'));
      this.classList.add('active');
      document.getElementById(`${calculatorId}-calculator`).classList.add('active');
    });
  });

  seeAllButtons.forEach(button => {
    button.addEventListener('click', function() {
      alert('This would show all transactions/budgets in a separate view');
    });
  });

  transactionForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const type = document.querySelector('.type-toggle button.active').getAttribute('data-type');
    const amount = parseFloat(document.getElementById('amount').value);
    const category = document.getElementById('category').value;
    const date = document.getElementById('date').value;
    const description = document.getElementById('description').value;

    if (!amount || !category || !date) {
      alert('Please fill in all required fields');
      return;
    }

    const newTransaction = {
      id: Date.now(),
      type,
      amount,
      category,
      date,
      description: description || `${category} ${type}`
    };

    transactions.unshift(newTransaction);
    updateBalance();
    saveDataToLocalStorage();
    renderTransactions();
    updateCharts();
    closeTransactionModal();
    transactionForm.reset();
    document.getElementById('date').valueAsDate = new Date();
  });

  budgetForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const category = document.getElementById('budget-category').value;
    const amount = parseFloat(document.getElementById('budget-amount').value);

    if (!category || !amount) {
      alert('Please fill in all fields');
      return;
    }

    // Update or add budget
    const existingBudgetIndex = budgets.findIndex(b => b.category === category);
    if (existingBudgetIndex >= 0) {
      budgets[existingBudgetIndex].budget = amount;
    } else {
      budgets.push({ category, budget: amount, spent: 0 });
    }

    saveDataToLocalStorage();
    renderBudgets();
    closeBudgetModal();
    budgetForm.reset();
  });

  groceryForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const name = document.getElementById('grocery-name').value;
    const quantity = document.getElementById('grocery-quantity').value;

    if (!name) {
      alert('Please enter an item name');
      return;
    }

    const newItem = { id: Date.now(), name, quantity: quantity || '1', completed: false };
    groceryList.unshift(newItem);
    saveDataToLocalStorage();
    renderGroceryList();
    closeGroceryModal();
    groceryForm.reset();
  });

  document.querySelectorAll('.close-modal').forEach(btn => {
    btn.addEventListener('click', function() {
      const modal = this.closest('.modal');
      modal.style.display = 'none';
    });
  });

  document.querySelectorAll('.modal').forEach(modal => {
    modal.addEventListener('click', function(e) {
      if (e.target === this) {
        this.style.display = 'none';
      }
    });
  });

  cancelDeleteBtn.addEventListener('click', closeConfirmationModal);
  confirmDeleteBtn.addEventListener('click', function() {
    if (transactionToDelete) {
      deleteTransaction(transactionToDelete);
      closeConfirmationModal();
    }
  });

  calculateEmiBtn.addEventListener('click', calculateEMI);
  calculatePercentageBtn.addEventListener('click', calculatePercentage);
  calculateInterestBtn.addEventListener('click', calculateInterest);

  // Tool card click handlers
  toolCards.forEach(card => {
    card.addEventListener('click', function() {
      const tool = this.getAttribute('data-tool');
      openToolModal(tool);
    });
  });

  closeToolModal.addEventListener('click', () => {
    toolModal.style.display = 'none';
  });

  // Functions
  function showTab(tabId) {
    tabs.forEach(t => t.classList.remove('active'));
    tabContents.forEach(c => c.classList.remove('active'));
    document.querySelector(`.tab[data-tab="${tabId}"]`).classList.add('active');
    document.getElementById(tabId).classList.add('active');
  }

  function openTransactionModal(type) {
    transactionModal.style.display = 'flex';
    typeToggleButtons.forEach(button => {
      button.classList.remove('active');
      if (button.getAttribute('data-type') === type) {
        button.classList.add('active');
      }
    });
    setTimeout(() => {
      document.getElementById('amount').focus();
    }, 100);
  }

  function openBudgetModal() {
    budgetModal.style.display = 'flex';
    setTimeout(() => {
      document.getElementById('budget-category').focus();
    }, 100);
  }

  function openGroceryModal() {
    groceryModal.style.display = 'flex';
    setTimeout(() => {
      document.getElementById('grocery-name').focus();
    }, 100);
  }

  function openConfirmationModal(transactionId) {
    transactionToDelete = transactionId;
    confirmationModal.style.display = 'flex';
  }

  function closeTransactionModal() {
    transactionModal.style.display = 'none';
  }

  function closeBudgetModal() {
    budgetModal.style.display = 'none';
  }

  function closeGroceryModal() {
    groceryModal.style.display = 'none';
  }

  function closeConfirmationModal() {
    transactionToDelete = null;
    confirmationModal.style.display = 'none';
  }

  function deleteTransaction(transactionId) {
    transactions = transactions.filter(t => t.id !== transactionId);
    saveDataToLocalStorage();
    updateBalance();
    renderTransactions();
    updateCharts();
  }

  function toggleGroceryItem(itemId) {
    const item = groceryList.find(item => item.id === itemId);
    if (item) {
      item.completed = !item.completed;
      saveDataToLocalStorage();
      renderGroceryList();
    }
  }

  function removeGroceryItem(itemId) {
    groceryList = groceryList.filter(item => item.id !== itemId);
    saveDataToLocalStorage();
    renderGroceryList();
  }

  function updateBalance() {
    const income = transactions
      .filter(t => t.type === 'income')
      .reduce((sum, t) => sum + t.amount, 0);
    const expenses = transactions
      .filter(t => t.type === 'expense')
      .reduce((sum, t) => sum + t.amount, 0);
    const balance = income - expenses;
    totalBalanceEl.textContent = formatCurrency(balance);
    totalIncomeEl.textContent = formatCurrency(income);
    totalExpenseEl.textContent = formatCurrency(expenses);
  }

  function renderTransactions() {
    transactionsContainer.innerHTML = '';
    if (transactions.length === 0) {
      transactionsContainer.innerHTML = '<div class="no-transactions">üì≠ No transactions yet. Add your first transaction!</div>';
      return;
    }
    const sortedTransactions = [...transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
    sortedTransactions.slice(0, 5).forEach(transaction => {
      const transactionEl = document.createElement('div');
      transactionEl.classList.add('transaction-item');
      transactionEl.innerHTML = `
        <div class="transaction-left">
          <div class="transaction-icon">
            <i class="fas fa-${transaction.type === 'income' ? 'plus' : 'minus'}"></i>
          </div>
          <div class="transaction-info">
            <h4>${transaction.description}</h4>
            <p>${new Date(transaction.date).toLocaleDateString()}</p>
          </div>
        </div>
        <div class="transaction-right">
          <span class="transaction-amount ${transaction.type}">${formatCurrency(transaction.amount)}</span>
          <div class="transaction-actions">
            <button class="delete-btn" data-id="${transaction.id}">üóëÔ∏è Delete</button>
          </div>
        </div>
      `;
      transactionsContainer.appendChild(transactionEl);
    });

    transactionsContainer.querySelectorAll('.delete-btn').forEach(button => {
      button.addEventListener('click', (e) => {
        const id = parseInt(e.target.getAttribute('data-id'));
        openConfirmationModal(id);
      });
    });
  }

  function renderBudgets() {
    budgetsContainer.innerHTML = '';
    if (budgets.length === 0) {
      budgetsContainer.innerHTML = '<div class="no-budgets">üì≠ No budgets set up yet. Create your first budget!</div>';
      return;
    }

    budgets.forEach(budget => {
      const spent = transactions
        .filter(t => t.type === 'expense' && t.category === budget.category)
        .reduce((sum, t) => sum + t.amount, 0);
      budget.spent = spent;
      const percentage = (spent / budget.budget) * 100;
      let progressClass = '';
      if (percentage > 90) {
        progressClass = 'progress-danger';
      } else if (percentage > 70) {
        progressClass = 'progress-warning';
      }

      const budgetEl = document.createElement('div');
      budgetEl.classList.add('budget-item');
      budgetEl.innerHTML = `
        <div class="budget-header">
          <div class="budget-category">
            <i class="fas fa-${getCategoryIcon(budget.category)}"></i>
            <h4>${budget.category.charAt(0).toUpperCase() + budget.category.slice(1)}</h4>
          </div>
          <span class="budget-amount">${formatCurrency(spent)} / ${formatCurrency(budget.budget)}</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill ${progressClass}" style="width: ${Math.min(100, percentage)}%;"></div>
        </div>
        <div class="budget-footer">
          <span>${percentage.toFixed(1)}% Used</span>
          <span>Remaining: ${formatCurrency(budget.budget - spent)}</span>
        </div>
      `;
      budgetsContainer.appendChild(budgetEl);
    });
  }

  function getCategoryIcon(category) {
    switch (category) {
      case 'food': return 'hamburger';
      case 'transport': return 'car';
      case 'shopping': return 'shopping-bag';
      case 'housing': return 'home';
      case 'entertainment': return 'film';
      case 'salary': return 'briefcase';
      default: return 'money-bill-wave';
    }
  }

  function renderGroceryList() {
    groceryContainer.innerHTML = '';
    if (groceryList.length === 0) {
      groceryContainer.innerHTML = '<div class="no-items">üõçÔ∏è Your grocery list is empty. Add some items!</div>';
      return;
    }

    groceryList.forEach(item => {
      const itemEl = document.createElement('div');
      itemEl.classList.add('grocery-item');
      if (item.completed) {
        itemEl.classList.add('completed');
      }
      itemEl.innerHTML = `
        <input type="checkbox" data-id="${item.id}" ${item.completed ? 'checked' : ''}>
        <span class="item-name">${item.name}</span>
        <span class="item-quantity">${item.quantity}</span>
        <button class="delete-btn" data-id="${item.id}">üóëÔ∏è</button>
      `;
      groceryContainer.appendChild(itemEl);
    });

    groceryContainer.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
      checkbox.addEventListener('change', (e) => {
        toggleGroceryItem(parseInt(e.target.getAttribute('data-id')));
      });
    });

    groceryContainer.querySelectorAll('.delete-btn').forEach(button => {
      button.addEventListener('click', (e) => {
        removeGroceryItem(parseInt(e.target.getAttribute('data-id')));
      });
    });
  }

  function initCharts() {
    const spendingCtx = document.getElementById('spendingChart').getContext('2d');
    spendingChart = new Chart(spendingCtx, {
      type: 'line',
      data: {
        labels: [], // Dates will go here
        datasets: [{
          label: 'Net Balance',
          data: [], // Balance over time
          borderColor: 'var(--primary)',
          tension: 0.1,
          fill: false
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: { beginAtZero: true }
        }
      }
    });

    const categoryCtx = document.getElementById('categoryChart').getContext('2d');
    categoryChart = new Chart(categoryCtx, {
      type: 'pie',
      data: {
        labels: [], // Categories will go here
        datasets: [{
          data: [], // Spending by category
          backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40']
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
      }
    });
    updateCharts();
  }

  function updateCharts() {
    // Spending Chart
    const dailyBalances = {};
    transactions.forEach(t => {
      const date = new Date(t.date).toLocaleDateString();
      if (!dailyBalances[date]) {
        dailyBalances[date] = 0;
      }
      dailyBalances[date] += (t.type === 'income' ? t.amount : -t.amount);
    });

    const sortedDates = Object.keys(dailyBalances).sort((a, b) => new Date(a) - new Date(b));
    let runningBalance = 0;
    const balanceData = sortedDates.map(date => {
      runningBalance += dailyBalances[date];
      return runningBalance;
    });

    spendingChart.data.labels = sortedDates;
    spendingChart.data.datasets[0].data = balanceData;
    spendingChart.update();

    // Category Chart
    const categorySpending = {};
    transactions
      .filter(t => t.type === 'expense')
      .forEach(t => {
        if (!categorySpending[t.category]) {
          categorySpending[t.category] = 0;
        }
        categorySpending[t.category] += t.amount;
      });

    categoryChart.data.labels = Object.keys(categorySpending);
    categoryChart.data.datasets[0].data = Object.values(categorySpending);
    categoryChart.update();
  }

  // Calculator Functions
  function calculateEMI() {
    const amount = parseFloat(document.getElementById('loan-amount').value);
    const interest = parseFloat(document.getElementById('interest-rate').value) / 100 / 12;
    const tenure = parseInt(document.getElementById('loan-tenure').value);
    const emiResultEl = document.getElementById('emi-result');

    if (!amount || !interest || !tenure) {
      emiResultEl.innerHTML = '<p>Please enter all values.</p>';
      return;
    }

    const emi = amount * interest * Math.pow((1 + interest), tenure) / (Math.pow((1 + interest), tenure) - 1);
    emiResultEl.innerHTML = `<p>Monthly EMI: <strong>${formatCurrency(emi)}</strong></p>`;
  }

  function calculatePercentage() {
    const value = parseFloat(document.getElementById('percentage-value').value);
    const percentage = parseFloat(document.getElementById('percentage').value);
    const percentageResultEl = document.getElementById('percentage-result');

    if (!value || !percentage) {
      percentageResultEl.innerHTML = '<p>Please enter all values.</p>';
      return;
    }

    const result = (value * percentage) / 100;
    percentageResultEl.innerHTML = `<p>${percentage}% of ${value} is <strong>${result.toFixed(2)}</strong></p>`;
  }

  function calculateInterest() {
    const principal = parseFloat(document.getElementById('principal-amount').value);
    const rate = parseFloat(document.getElementById('interest-rate-simple').value) / 100;
    const time = parseFloat(document.getElementById('time-period').value);
    const interestResultEl = document.getElementById('interest-result');

    if (!principal || !rate || !time) {
      interestResultEl.innerHTML = '<p>Please enter all values.</p>';
      return;
    }

    const simpleInterest = principal * rate * time;
    const totalAmount = principal + simpleInterest;
    interestResultEl.innerHTML = `
      <p>Simple Interest: <strong>${formatCurrency(simpleInterest)}</strong></p>
      <p>Total Amount: <strong>${formatCurrency(totalAmount)}</strong></p>
    `;
  }

  // Tool Modal Functions
  function openToolModal(tool) {
    toolModal.style.display = 'flex';
    // Hide all tool contents first
    document.querySelectorAll('#tool-modal-content > div').forEach(div => {
      div.style.display = 'none';
    });

    let title = '';
    let contentId = '';

    switch (tool) {
      case 'bmi':
        title = 'BMI Calculator';
        contentId = 'bmi-tool';
        break;
      case 'age':
        title = 'Age Calculator';
        contentId = 'age-tool';
        break;
      case 'discount':
        title = 'Discount Calculator';
        contentId = 'discount-tool';
        break;
      case 'gst':
        title = 'GST Calculator';
        contentId = 'gst-tool';
        break;
      case 'sip':
        title = 'SIP Calculator';
        contentId = 'sip-tool';
        break;
      case 'qrcode':
        title = 'QR Code Generator';
        contentId = 'qrcode-tool';
        break;
      case 'tts':
        title = 'Text to Speech';
        contentId = 'tts-tool';
        break;
      case 'unit':
        title = 'Unit Converter (KM to Miles)';
        contentId = 'unit-tool';
        break;
      case 'base64':
        title = 'Base64 Encoder (Image)';
        contentId = 'base64-tool';
        break;
      case 'image-compressor':
        title = 'Image Compressor / Resizer';
        contentId = 'image-compressor-tool';
        break;
      case 'password-generator':
        title = 'Password Generator';
        contentId = 'password-generator-tool';
        break;
      case 'currency-converter':
        title = 'Currency Converter';
        contentId = 'currency-converter-tool';
        break;
      case 'electricity':
        title = 'Electricity Bill Calculator';
        contentId = 'electricity-tool';
        break;
      case 'water':
        title = 'Water Intake Calculator';
        contentId = 'water-tool';
        break;
      case 'sleep':
        title = 'Sleep Cycle Calculator';
        contentId = 'sleep-tool';
        break;
      case 'tip':
        title = 'Tip Calculator';
        contentId = 'tip-tool';
        break;
      case 'pdf-tools':
        title = 'PDF Tools';
        contentId = 'pdf-tools-tool';
        break;
      case 'video-converter':
        title = 'Video to MP3 Converter / Compressor';
        contentId = 'video-converter-tool';
        break;
      case 'image-to-text':
        title = 'Image to Text (OCR)';
        contentId = 'image-to-text-tool';
        break;
      case 'file-converter':
        title = 'All-in-One File Converter';
        contentId = 'file-converter-tool';
        break;
      default:
        title = 'Unknown Tool';
        contentId = ''; // No content to show
        break;
    }

    toolModalTitle.textContent = title;
    if (contentId) {
      document.getElementById(contentId).style.display = 'block';
    }
  }

  // --- Specific Tool Implementations (placeholders) ---

  // BMI Calculator
  document.getElementById('calculate-bmi')?.addEventListener('click', function() {
    const weight = parseFloat(document.getElementById('bmi-weight').value);
    const height = parseFloat(document.getElementById('bmi-height').value) / 100; // convert cm to meters
    const bmiResultEl = document.getElementById('bmi-result');
    if (weight && height) {
      const bmi = weight / (height * height);
      let category = '';
      if (bmi < 18.5) category = 'Underweight';
      else if (bmi >= 18.5 && bmi < 24.9) category = 'Normal weight';
      else if (bmi >= 25 && bmi < 29.9) category = 'Overweight';
      else category = 'Obesity';
      bmiResultEl.innerHTML = `<p>Your BMI: <strong>${bmi.toFixed(2)}</strong> (${category})</p>`;
    } else {
      bmiResultEl.innerHTML = '<p>Please enter valid weight and height.</p>';
    }
  });

  // Age Calculator
  document.getElementById('calculate-age')?.addEventListener('click', function() {
    const dobInput = document.getElementById('dob').value;
    const ageResultEl = document.getElementById('age-result');
    if (dobInput) {
      const dob = new Date(dobInput);
      const today = new Date();
      let age = today.getFullYear() - dob.getFullYear();
      const monthDiff = today.getMonth() - dob.getMonth();
      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
        age--;
      }
      ageResultEl.innerHTML = `<p>Your Age: <strong>${age} years</strong></p>`;
    } else {
      ageResultEl.innerHTML = '<p>Please enter your date of birth.</p>';
    }
  });

  // Discount Calculator
  document.getElementById('calculate-discount')?.addEventListener('click', function() {
    const originalPrice = parseFloat(document.getElementById('original-price').value);
    const discountPercentage = parseFloat(document.getElementById('discount-percentage').value);
    const discountResultEl = document.getElementById('discount-result');
    if (originalPrice && discountPercentage) {
      const discountAmount = originalPrice * (discountPercentage / 100);
      const finalPrice = originalPrice - discountAmount;
      discountResultEl.innerHTML = `
        <p>Discount Amount: <strong>${formatCurrency(discountAmount)}</strong></p>
        <p>Final Price: <strong>${formatCurrency(finalPrice)}</strong></p>
      `;
    } else {
      discountResultEl.innerHTML = '<p>Please enter valid price and discount.</p>';
    }
  });

  // GST Calculator
  document.getElementById('calculate-gst')?.addEventListener('click', function() {
    const amount = parseFloat(document.getElementById('gst-amount').value);
    const rate = parseFloat(document.getElementById('gst-rate').value);
    const gstResultEl = document.getElementById('gst-result');
    if (amount && rate) {
      const gstAmount = amount * (rate / 100);
      const totalAmount = amount + gstAmount;
      gstResultEl.innerHTML = `
        <p>GST Amount: <strong>${formatCurrency(gstAmount)}</strong></p>
        <p>Total Amount: <strong>${formatCurrency(totalAmount)}</strong></p>
      `;
    } else {
      gstResultEl.innerHTML = '<p>Please enter valid amount and GST rate.</p>';
    }
  });

  // SIP Calculator
  document.getElementById('calculate-sip')?.addEventListener('click', function() {
    const monthlyInvestment = parseFloat(document.getElementById('sip-monthly-investment').value);
    const expectedReturn = parseFloat(document.getElementById('sip-expected-return').value) / 100 / 12; // Monthly rate
    const timePeriod = parseFloat(document.getElementById('sip-time-period').value) * 12; // Months
    const sipResultEl = document.getElementById('sip-result');

    if (!monthlyInvestment || !expectedReturn || !timePeriod) {
      sipResultEl.innerHTML = '<p>Please enter all values.</p>';
      return;
    }

    let futureValue = 0;
    for (let i = 0; i < timePeriod; i++) {
      futureValue += monthlyInvestment * Math.pow((1 + expectedReturn), (timePeriod - i));
    }
    const investedAmount = monthlyInvestment * timePeriod;
    const estimatedReturns = futureValue - investedAmount;

    sipResultEl.innerHTML = `
      <p>Invested Amount: <strong>${formatCurrency(investedAmount)}</strong></p>
      <p>Estimated Returns: <strong>${formatCurrency(estimatedReturns)}</strong></p>
      <p>Total Value: <strong>${formatCurrency(futureValue)}</strong></p>
    `;
  });

  // QR Code Generator
  document.getElementById('generate-qr')?.addEventListener('click', function() {
    const qrText = document.getElementById('qr-text').value;
    const canvas = document.getElementById('qrcode-canvas');
    const qrResultEl = document.getElementById('qr-result');
    if (qrText) {
      QRCode.toCanvas(canvas, qrText, function (error) {
        if (error) console.error(error);
        qrResultEl.style.display = 'block';
      });
    } else {
      qrResultEl.style.display = 'none';
      alert('Please enter text for QR code.');
    }
  });

  // Text to Speech
  document.getElementById('play-tts')?.addEventListener('click', function() {
    const ttsText = document.getElementById('tts-text').value;
    if (ttsText) {
      const utterance = new SpeechSynthesisUtterance(ttsText);
      speechSynthesis.speak(utterance);
    } else {
      alert('Please enter text to convert to speech.');
    }
  });

  // Unit Converter (KM to Miles)
  document.getElementById('convert-unit')?.addEventListener('click', function() {
    const km = parseFloat(document.getElementById('km-input').value);
    const unitResultEl = document.getElementById('unit-result');
    if (km) {
      const miles = km * 0.621371;
      unitResultEl.innerHTML = `<p>${km} km is <strong>${miles.toFixed(2)} miles</strong></p>`;
    } else {
      unitResultEl.innerHTML = '<p>Please enter kilometers.</p>';
    }
  });

  // Base64 Encoder (Image)
  document.getElementById('encode-base64')?.addEventListener('click', function() {
    const fileInput = document.getElementById('base64-image-input');
    const base64Output = document.getElementById('base64-output');
    const base64ResultEl = document.getElementById('base64-result');
    const file = fileInput.files[0];

    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        base64Output.value = e.target.result;
        base64ResultEl.style.display = 'block';
      };
      reader.readAsDataURL(file);
    } else {
      alert('Please select an image file.');
      base64ResultEl.style.display = 'none';
    }
  });

  document.getElementById('copy-base64-btn')?.addEventListener('click', function() {
    const base64Output = document.getElementById('base64-output');
    base64Output.select();
    document.execCommand('copy');
    const copyBtn = this;
    copyBtn.textContent = 'Copied!';
    setTimeout(() => {
      copyBtn.textContent = 'Copy to Clipboard';
    }, 2000);
  });

  // Image Compressor / Resizer
  document.getElementById('compress-image')?.addEventListener('click', function() {
    const fileInput = document.getElementById('image-upload-compress');
    const quality = parseFloat(document.getElementById('compression-quality').value);
    const resizeWidth = parseInt(document.getElementById('resize-width').value);
    const downloadLink = document.getElementById('download-compressed-image');
    const previewImage = document.getElementById('preview-compressed-image');
    const compressedImageResult = document.getElementById('compressed-image-result');
    const file = fileInput.files[0];

    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const img = new Image();
        img.onload = function() {
          const canvas = document.createElement('canvas');
          let width = img.width;
          let height = img.height;

          if (resizeWidth && resizeWidth < width) {
            height = (resizeWidth / width) * height;
            width = resizeWidth;
          }

          canvas.width = width;
          canvas.height = height;
          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0, width, height);

          canvas.toBlob(function(blob) {
            const url = URL.createObjectURL(blob);
            downloadLink.href = url;
            downloadLink.style.display = 'block';
            previewImage.src = url;
            previewImage.style.display = 'block';
            compressedImageResult.style.display = 'block';
            alert('Image compressed/resized! You can download it now.');
          }, 'image/jpeg', quality); // Use JPEG for compression as it's typically smaller than PNG
        };
        img.src = e.target.result;
      };
      reader.readAsDataURL(file);
    } else {
      alert('Please upload an image.');
      compressedImageResult.style.display = 'none';
    }
  });

  // Password Generator
  document.getElementById('generate-password')?.addEventListener('click', function() {
    const length = parseInt(document.getElementById('password-length').value);
    const includeUppercase = document.getElementById('include-uppercase').checked;
    const includeLowercase = document.getElementById('include-lowercase').checked;
    const includeNumbers = document.getElementById('include-numbers').checked;
    const includeSymbols = document.getElementById('include-symbols').checked;
    const generatedPasswordInput = document.getElementById('generated-password');

    let characters = '';
    if (includeUppercase) characters += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    if (includeLowercase) characters += 'abcdefghijklmnopqrstuvwxyz';
    if (includeNumbers) characters += '0123456789';
    if (includeSymbols) characters += '!@#$%^&*()_+~`|}{[]:;?><,./-=';

    if (characters.length === 0) {
      alert('Please select at least one character type.');
      generatedPasswordInput.value = '';
      return;
    }

    let password = '';
    for (let i = 0; i < length; i++) {
      const randomIndex = Math.floor(Math.random() * characters.length);
      password += characters[randomIndex];
    }
    generatedPasswordInput.value = password;
  });

  document.getElementById('copy-password-btn')?.addEventListener('click', function() {
    const generatedPasswordInput = document.getElementById('generated-password');
    generatedPasswordInput.select();
    document.execCommand('copy');
    const copyBtn = this;
    copyBtn.textContent = 'Copied!';
    setTimeout(() => {
      copyBtn.textContent = 'Copy to Clipboard';
    }, 2000);
  });

  // Currency Converter
  document.getElementById('convert-currency')?.addEventListener('click', function() {
    const amount = parseFloat(document.getElementById('convert-amount').value);
    const from = document.getElementById('convert-from').value;
    const to = document.getElementById('convert-to').value;
    
    if (!amount) {
      alert('Please enter an amount');
      return;
    }
    
    if (from === to) {
      document.getElementById('currency-result').innerHTML = `
        <p>Same currencies selected. No conversion needed.</p>
      `;
      return;
    }
    
    // In a real app, you would fetch rates from an API
    // For demo, we'll use hardcoded rates (not accurate)
    const rates = {
      USD: { EUR: 0.85, GBP: 0.73, JPY: 110.5, INR: 75.2 },
      EUR: { USD: 1.18, GBP: 0.86, JPY: 130.2, INR: 88.5 },
      GBP: { USD: 1.37, EUR: 1.16, JPY: 151.3, INR: 103.1 },
      JPY: { USD: 0.009, EUR: 0.0077, GBP: 0.0066, INR: 0.68 },
      INR: { USD: 0.013, EUR: 0.011, GBP: 0.0097, JPY: 1.47 }
    };

    let convertedAmount;
    if (rates[from] && rates[from][to]) {
        convertedAmount = amount * rates[from][to];
    } else if (rates[to] && rates[to][from]) {
        convertedAmount = amount / rates[to][from];
    } else {
        document.getElementById('currency-result').innerHTML = `<p>Conversion rate not available for ${from} to ${to}.</p>`;
        return;
    }

    document.getElementById('currency-result').innerHTML = `
      <p>${amount.toFixed(2)} ${from} = <strong>${convertedAmount.toFixed(2)} ${to}</strong></p>
    `;
  });

  // Electricity Bill Calculator
  document.getElementById('calculate-electricity')?.addEventListener('click', function() {
    const units = parseFloat(document.getElementById('units-consumed').value);
    const costPerUnit = parseFloat(document.getElementById('cost-per-unit').value);
    const electricityResultEl = document.getElementById('electricity-result');
    if (units && costPerUnit) {
      const totalBill = units * costPerUnit;
      electricityResultEl.innerHTML = `<p>Estimated Bill: <strong>${formatCurrency(totalBill)}</strong></p>`;
    } else {
      electricityResultEl.innerHTML = '<p>Please enter units consumed and cost per unit.</p>';
    }
  });

  // Water Intake Calculator
  document.getElementById('calculate-water')?.addEventListener('click', function() {
    const weight = parseFloat(document.getElementById('water-weight').value);
    const waterResultEl = document.getElementById('water-result');
    if (weight) {
      // General recommendation: ~30-35ml per kg of body weight
      const intakeMl = weight * 33;
      const intakeLiters = intakeMl / 1000;
      waterResultEl.innerHTML = `<p>Recommended daily water intake: <strong>${intakeLiters.toFixed(2)} liters</strong> (${intakeMl.toFixed(0)} ml)</p>`;
    } else {
      waterResultEl.innerHTML = '<p>Please enter your weight.</p>';
    }
  });

  // Sleep Cycle Calculator
  document.getElementById('calculate-sleep')?.addEventListener('click', function() {
    const bedtimeInput = document.getElementById('bedtime-input').value;
    const sleepResultEl = document.getElementById('sleep-result');
    if (bedtimeInput) {
      const [hours, minutes] = bedtimeInput.split(':').map(Number);
      const bedtime = new Date();
      bedtime.setHours(hours, minutes, 0, 0);

      const sleepCycles = [4, 5, 6]; // Common sleep cycles
      let resultHtml = '<h4>Optimal Wake Up Times:</h4><ul>';

      sleepCycles.forEach(cycles => {
        const wakeUpTime = new Date(bedtime.getTime() + (cycles * 90 + 15) * 60 * 1000); // 90 mins per cycle + 15 mins to fall asleep
        resultHtml += `<li>For ${cycles} cycles: <strong>${wakeUpTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</strong></li>`;
      });
      resultHtml += '</ul><p>Aim to wake up at the end of a sleep cycle to feel refreshed.</p>';
      sleepResultEl.innerHTML = resultHtml;
    } else {
      sleepResultEl.innerHTML = '<p>Please enter your planned bedtime.</p>';
    }
  });

  // Tip Calculator
  document.getElementById('calculate-tip')?.addEventListener('click', function() {
    const billAmount = parseFloat(document.getElementById('bill-amount').value);
    const tipPercentage = parseFloat(document.getElementById('tip-percentage').value);
    const tipResultEl = document.getElementById('tip-result');
    if (billAmount && tipPercentage) {
      const tipAmount = billAmount * (tipPercentage / 100);
      const totalAmount = billAmount + tipAmount;
      tipResultEl.innerHTML = `
        <p>Tip Amount: <strong>${formatCurrency(tipAmount)}</strong></p>
        <p>Total Bill: <strong>${formatCurrency(totalAmount)}</strong></p>
      `;
    } else {
      tipResultEl.innerHTML = '<p>Please enter bill amount and tip percentage.</p>';
    }
  });

  // --- New Tool Placeholders (Add actual logic here) ---

  // PDF Tools
  document.getElementById('perform-pdf-action')?.addEventListener('click', function() {
      alert('PDF Tools functionality is not yet implemented.');
      document.getElementById('pdf-tools-result').innerHTML = '<p>Functionality coming soon!</p>';
  });

  // Video to MP3 Converter / Compressor
  document.getElementById('perform-video-action')?.addEventListener('click', function() {
      alert('Video Converter functionality is not yet implemented.');
      document.getElementById('video-converter-result').innerHTML = '<p>Functionality coming soon!</p>';
  });

  // Image to Text (OCR)
  document.getElementById('perform-ocr')?.addEventListener('click', function() {
      alert('Image to Text (OCR) functionality is not yet implemented.');
      document.getElementById('ocr-output').value = 'No text extracted. Functionality coming soon!';
  });

  document.getElementById('copy-ocr-text-btn')?.addEventListener('click', function() {
    const ocrOutput = document.getElementById('ocr-output');
    ocrOutput.select();
    document.execCommand('copy');
    const copyBtn = this;
    copyBtn.textContent = 'Copied!';
    setTimeout(() => {
      copyBtn.textContent = 'Copy to Clipboard';
    }, 2000);
  });

  // File Converter (all-in-one)
  document.getElementById('perform-file-conversion')?.addEventListener('click', function() {
      alert('File Converter functionality is not yet implemented.');
      document.getElementById('file-converter-result').innerHTML = '<p>Functionality coming soon!</p>';
  });

</script>
</body>
</html>
